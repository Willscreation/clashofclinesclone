<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | Clash of Clans</title>
    <link rel="stylesheet" href="login.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="wrapper">
        <!-- Login Form -->
        <form id="login-form" style="display: none;">
            <h1>Sign in</h1>
            <div class="input-box">
                <input type="text" placeholder="Username" id="username" required>
                <i class='bx bxs-user'></i>
            </div>
            <div class="input-box">
                <input type="password" id="password" placeholder="Password" required>
                <i class='bx bxs-lock-alt'></i>
            </div>
            <button type="submit" class="btn">Login</button>
            <p class="register-link">Don't have an account? <a href="#" id="show-register">Register here</a></p>
        </form>

        <!-- Register Form (Initially hidden) -->
        <form id="register-form" >
            <h1>Create Account</h1>
            <div class="input-box">
                <input type="text" placeholder="Username" id="reg-username" required>
                <i class='bx bxs-user'></i>
            </div>
            <div class="input-box">
                <input type="email" placeholder="Email" id="reg-email" required>
                <i class='bx bxs-envelope'></i>
            </div>
            <div class="input-box">
                <input type="password" placeholder="Password" id="reg-password" required>
                <i class='bx bxs-lock-alt'></i>
            </div>
            <button type="submit" class="btn">Submit</button>
            <p class="register-link">Already have an account? <a href="#" id="show-login">Login here</a></p>
        </form>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const loginForm = document.getElementById("login-form");
            const registerForm = document.getElementById("register-form");
            const showRegisterLink = document.getElementById("show-register");
            const showLoginLink = document.getElementById("show-login");

            // Show Register Form
            showRegisterLink.addEventListener("click", (event) => {
                event.preventDefault();
                loginForm.style.display = "none";
                registerForm.style.display = "block";
            });

            // Show Login Form
            showLoginLink.addEventListener("click", (event) => {
                event.preventDefault();
                registerForm.style.display = "none";
                loginForm.style.display = "block";
            });

            // Login Functionality
            loginForm.addEventListener("submit", (event) => {
                event.preventDefault();
                const username = document.getElementById("username").value;
                const password = document.getElementById("password").value;

                // Check credentials (this is a placeholder for a real authentication process)
                if (username && password ) {
                    localStorage.setItem("isLoggedIn", "true"); // Set login status
                    alert("Login successful!");
                    window.location.href = "index.html"; // Redirect to homepage
                } else {
                    alert("Invalid username or password.");
                }
            });

            // Register Functionality
            registerForm.addEventListener("submit", (event) => {
                event.preventDefault();
                const regUsername = document.getElementById("reg-username").value;
                const regEmail = document.getElementById("reg-email").value;    
                const regPassword = document.getElementById("reg-password").value;

                // Placeholder for saving new user details (could be stored in a database)
                alert(`Account created for ${regUsername} with email ${regEmail}`);
                
                // Redirect to login form after registration
                registerForm.style.display = "none";
                loginForm.style.display = "block";
            });
        });
        document.addEventListener("DOMContentLoaded", function () {
            const authBtn = document.getElementById("auth-btn");

            // Check login status and update button text
            function updateAuthButton() {
                if (localStorage.getItem("isLoggedIn") === "true") {
                    authBtn.textContent = "sign out";
                } else {
                    authBtn.textContent = "sign in";
                }
            }

            // Initialize button state
            updateAuthButton();

            // Toggle login/logout action
            authBtn.addEventListener("click", function () {
                if (localStorage.getItem("isLoggedIn") === "true") {
                    localStorage.removeItem("isLoggedIn");
                    alert("You have been logged out.");
                    updateAuthButton();
                    window.location.href = "login.html"; // Redirect to login page after alert
                } else {
                    window.location.href = "login.html"; // Redirect to login page
                }
            });
        });
    </script>
</body>
</html>
